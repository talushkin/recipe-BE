openapi: 3.0.0
info:
  title: Recipe App API
  version: 1.0.0
  description: API documentation for Recipe App including Category, Recipe, and OpenAI endpoints.

paths:
  /api/ai/translate:
    post:
      summary: Get translation for text
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  example: "Hello, how are you?"
                targetLanguage:
                  type: string
                  example: "es"
      responses:
        '200':
          description: Translation successful
  /api/ai/image:
    post:
      summary: Create picture from text
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  example: "flowers in a field"
      responses:
        '200':
          description: Image created
  /api/ai/fill-recipe:
    post:
      summary: Create text for recipe from title
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                recipeId:
                  type: string
                  example: "6824b89071230ea2707f2280"
                title:
                  type: string
                  example: "italian pizza margarita"
      responses:
        '200':
          description: Recipe filled
  /api/ai/get-sql-q:
    post:
      summary: Generate SQL query from natural language
      description: Convert natural language questions (in English or Hebrew) to SQL queries based on XPlace database schema
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - q
              properties:
                q:
                  type: string
                  description: Natural language query in English or Hebrew
                  example: "Show me all companies with their names and cities"
                csv:
                  type: array
                  description: Optional array of custom CSV data objects. If not provided, uses default xplaceTables
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: Name of the CSV table
                        example: "customers.csv"
                      content:
                        type: string
                        description: CSV content with headers and data rows
                        example: "id,name,email\n1,John Doe,john@example.com\n2,Jane Smith,jane@example.com"
      responses:
        '200':
          description: SQL query generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  query:
                    type: string
                    description: Original natural language query
                    example: "Show me all companies with their names and cities"
                  sqlQuery:
                    type: string
                    description: Generated SQL query
                    example: "SELECT company_name, city FROM company;"
                  tableSchemas:
                    type: string
                    description: Available database table schemas
                    example: "Table: category\nColumns: id, name, description, parent_id, status, created_date\n\nTable: company\nColumns: id, email, username, password, first_name, last_name, company_name, description, website, phone, city, country, status, is_verified, rating, created_date"
        '400':
          description: Bad request - missing query parameter
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Query (q) is required"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Failed to generate SQL query"
                  details:
                    type: object
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
